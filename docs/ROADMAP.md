# ROADMAP: 모이자 (Moija)

> 마지막 업데이트: 2026-02-20

카카오톡 단체 채팅방 대신 사용할 수 있는 소모임 공지 및 참여 관리 도구.
주최자는 링크 하나로 모임 공지, 참여 신청 수집, 출석 체크를 처리할 수 있다.

## 현재 상태

**MVP 완성** - 핵심 기능 모두 동작 중

- **인증 시스템**: 이메일/비밀번호, Google OAuth, 비밀번호 재설정
- **모임 관리**: 생성/조회/수정/삭제, 상태 관리(draft/open/closed/completed)
- **참여자 관리**: 참여 신청(비회원 포함), 상태 변경(확정/취소), 출석 체크
- **공개 모임 페이지**: 슬러그 기반 URL, 비회원 참여 신청, 링크 공유
- **프로필 관리**: 사용자명/실명/웹사이트/자기소개
- **테마**: 다크/라이트 전환

## 개발 워크플로우

1. **작업 계획**
   - 기존 코드베이스를 학습하고 현재 상태를 파악
   - 새로운 작업을 포함하도록 `ROADMAP.md` 업데이트
   - 우선순위 작업은 마지막 완료된 작업 다음에 삽입

2. **작업 생성**
   - 기존 코드베이스를 학습하고 현재 상태를 파악
   - `/tasks` 디렉토리에 새 작업 파일 생성
   - 명명 형식: `XXX-description.md` (예: `001-setup.md`)
   - 고수준 명세서, 관련 파일, 수락 기준, 구현 단계 포함
   - API/비즈니스 로직 작업 시 "## 테스트 체크리스트" 섹션 필수 포함
   - 이전 완료 작업을 참조 예시로 활용

3. **작업 구현**
   - 작업 파일의 명세서를 따름
   - 기능과 기능성 구현
   - API 연동 및 비즈니스 로직 구현 시 Playwright MCP로 테스트 수행
   - 각 단계 후 작업 파일 내 단계 진행 상황 업데이트
   - 각 단계 완료 후 중단하고 추가 지시를 기다림

4. **로드맵 업데이트**
   - 로드맵에서 완료된 작업을 완료 표시로 갱신

---

## 개발 단계

### Phase 0: MVP (완료)

- **Task 001: 프로젝트 초기 설정** - 완료
  - See: 초기 커밋 참조
  - Next.js 15 App Router + TypeScript + TailwindCSS 프로젝트 생성
  - Supabase 연동 (Auth, PostgreSQL, RLS)
  - ESLint, Prettier, Husky, commitlint 설정
  - shadcn/ui 컴포넌트 라이브러리 설치

- **Task 002: 인증 시스템 구현** - 완료
  - 이메일/비밀번호 회원가입 및 로그인
  - Google OAuth 로그인/회원가입
  - 비밀번호 재설정 (이메일 링크 발송)
  - 미들웨어 기반 미인증 접근 차단 (`proxy.ts`)
  - `getClaims()` 기반 JWT 세션 검증

- **Task 003: 데이터베이스 스키마 설계 및 구축** - 완료
  - `profiles` 테이블 (auth.users 1:1 연결, 트리거 자동 생성)
  - `events` 테이블 (모임 정보, nanoid 슬러그)
  - `event_participants` 테이블 (참여자, 비회원 지원)
  - RLS 정책 적용

- **Task 004: 모임 관리 기능 구현** - 완료
  - 모임 생성 폼 (React Hook Form + Zod 검증)
  - 모임 목록 조회 (카드 그리드, 날짜 역순)
  - 모임 상세 조회 (개요 탭 + 참여자 탭)
  - 모임 수정/삭제 (호스트 본인만 가능, 삭제 확인 다이얼로그)
  - 모임 상태 변경 (draft/open/closed/completed)

- **Task 005: 참여자 관리 기능 구현** - 완료
  - 참여자 목록 조회 (이름/연락처/상태/신청일 테이블)
  - 참여자 상태 변경 (확정/취소)
  - 출석 체크 화면 (체크박스 방식, 출석 현황 요약)

- **Task 006: 공개 모임 페이지 및 참여 신청** - 완료
  - 슬러그 기반 공개 URL (`/events/{slug}`)
  - 비회원 참여 신청 (이름 필수, 연락처/메모 선택)
  - 로그인 사용자 이름 자동 입력 및 중복 신청 차단
  - 정원 초과 시 신청 불가 처리
  - 주최자 관리 링크 노출

- **Task 007: 부가 기능 구현** - 완료
  - 공유 링크 복사 (클립보드 + "복사됨" 피드백)
  - 프로필 관리 (사용자명/실명/웹사이트/자기소개)
  - 다크/라이트 테마 전환
  - 랜딩 페이지 (히어로 섹션, 핵심 기능 카드)

---

### Phase 1: MVP 안정화 및 사용성 개선

- **Task 008: 에러 처리 및 로딩 상태 개선** - 우선순위
  - 전역 에러 바운더리 및 `error.tsx` / `not-found.tsx` 페이지 정비
  - Server Action 에러 응답 일관성 강화 (토스트 알림 통합)
  - 폼 제출 시 로딩 스피너 및 버튼 비활성화 일관 적용
  - 네트워크 오류/타임아웃 대응 UX 개선
  - Playwright MCP를 활용한 에러 시나리오 E2E 테스트

- **Task 009: 모임 목록 UX 개선** - 우선순위
  - 모임 상태별 필터링 (전체/모집중/마감/완료)
  - 모임 검색 기능 (제목 기반)
  - 빈 상태(Empty State) UI 개선
  - 모임 카드에 참여자 수/정원 표시 강화
  - 페이지네이션 또는 무한 스크롤 적용

- **Task 010: 참여자 관리 UX 개선** - 중간
  - 참여자 일괄 확정/취소 기능
  - 참여자 목록 정렬 (신청일/이름/상태)
  - 참여자 검색 기능
  - 출석 체크 화면에서 전체 선택/해제 기능
  - 참여자 수 카운트 실시간 반영

- **Task 011: 반응형 디자인 및 접근성 강화** - 중간
  - 모바일 환경 전체 화면 점검 및 최적화
  - 터치 인터랙션 개선 (스와이프, 탭 영역 확대)
  - ARIA 레이블 및 키보드 네비게이션 점검
  - 색상 대비 및 폰트 크기 접근성 기준 충족

- **Task 012: SEO 및 메타데이터 최적화** - 낮음
  - 각 페이지별 `metadata` 정의 (title, description, og:image)
  - 공개 모임 페이지 동적 OG 이미지 생성
  - `sitemap.xml` 및 `robots.txt` 설정
  - 구조화된 데이터(JSON-LD) 적용 (Event 스키마)

---

### Phase 2: 핵심 기능 확장 (v1.1)

- **Task 013: 알림 시스템 구축** - 우선순위
  - 알림 데이터 모델 설계 (`notifications` 테이블)
  - 인앱 알림 센터 UI (헤더 벨 아이콘 + 드롭다운)
  - 새 참여 신청 시 주최자에게 알림
  - 참여 상태 변경 시 참여자에게 알림 (회원 한정)
  - 모임 정보 변경 시 확정 참여자에게 알림
  - Playwright MCP를 활용한 알림 플로우 E2E 테스트

- **Task 014: 이메일 알림 연동** - 우선순위
  - Supabase Edge Function 또는 Resend API 연동
  - 참여 신청 확인 이메일 (참여자에게)
  - 모임 리마인더 이메일 (D-1 자동 발송)
  - 이메일 템플릿 디자인 (모이자 브랜딩)
  - 이메일 발송 설정 (알림 수신 on/off)

- **Task 015: 참여자 대기열 시스템** - 우선순위
  - 정원 초과 시 대기열 자동 등록
  - 대기 순번 표시 UI
  - 기존 참여자 취소 시 대기열 자동 승격 로직
  - 대기열 승격 시 알림 발송
  - Playwright MCP를 활용한 대기열 로직 E2E 테스트

- **Task 016: 정기 모임 (반복 일정)** - 중간
  - 반복 규칙 설정 UI (매주/격주/매월 + 요일/날짜 선택)
  - 반복 모임 데이터 모델 확장 (`recurrence_rule` 필드)
  - 다음 회차 자동 생성 로직
  - 반복 모임 시리즈 관리 (전체 수정/개별 수정)
  - 과거 회차 아카이브 및 히스토리 조회

- **Task 017: 모임 템플릿** - 중간
  - 이전 모임 기반 템플릿 저장 기능
  - 템플릿 목록 관리 UI
  - 템플릿에서 새 모임 빠르게 생성
  - 기본 제공 템플릿 (운동 모임, 스터디, 식사 모임 등)

- **Task 018: 모임 이미지 및 미디어** - 낮음
  - Supabase Storage 연동
  - 모임 대표 이미지 업로드/표시
  - 이미지 리사이즈 및 최적화
  - 공개 페이지 및 카드에 이미지 반영

---

### Phase 3: 소셜 및 수익화 (v2.0)

- **Task 019: 결제 연동 (참가비 수납)** - 우선순위
  - 결제 서비스 연동 (토스페이먼츠 또는 포트원)
  - 모임 생성 시 선결제 옵션 설정
  - 참여 신청 시 결제 플로우 (결제 완료 후 자동 확정)
  - 환불 처리 로직 (주최자 취소, 참여자 취소)
  - 정산 내역 조회 및 관리
  - Playwright MCP를 활용한 결제 플로우 E2E 테스트

- **Task 020: 공개 모임 검색 및 탐색** - 중간
  - 모임 공개/비공개 설정 옵션 추가
  - 공개 모임 탐색 페이지 (`/explore`)
  - 카테고리별 분류 (운동, 스터디, 취미, 식사 등)
  - 지역/날짜/카테고리 필터링
  - 키워드 검색 (Full-text search)

- **Task 021: 통계 및 분석 대시보드** - 중간
  - 주최자 대시보드 (총 모임 수, 누적 참여자, 출석률)
  - 모임별 통계 (참여율, 출석률, 취소율 추이)
  - 참여자 분석 (재참여율, 활동 빈도)
  - 차트 시각화 (Recharts 또는 Chart.js)
  - 통계 데이터 CSV 내보내기

- **Task 022: 소셜 기능 강화** - 낮음
  - 사용자 간 팔로우/팔로잉
  - 주최자 프로필 공개 페이지
  - 모임 후기/평점 시스템
  - 모임 추천 알고리즘 (참여 이력 기반)

- **Task 023: 카카오톡 알림 연동** - 낮음
  - 카카오 알림톡 API 연동
  - 참여 확정/변경 시 카카오톡 발송
  - 모임 리마인더 카카오톡 발송 (D-1)
  - 발송 내역 관리 및 실패 재시도 로직

---

### Phase 4: 플랫폼 확장 (v3.0)

- **Task 024: PWA 및 모바일 최적화** - 중간
  - PWA manifest 및 Service Worker 설정
  - 오프라인 기본 동작 지원 (캐시된 모임 목록 표시)
  - 앱 설치 프롬프트 UI
  - 푸시 알림 (Web Push API)
  - 모바일 앱스토어 배포 검토 (TWA/Capacitor)

- **Task 025: 다국어 지원 (i18n)** - 낮음
  - next-intl 또는 next-i18next 설정
  - 한국어/영어 번역 파일 구성
  - 언어 전환 UI
  - URL 기반 로케일 라우팅

- **Task 026: 관리자 대시보드** - 낮음
  - 서비스 전체 통계 (사용자 수, 모임 수, 활성 사용자)
  - 사용자/모임 관리 (신고 처리, 정지)
  - 시스템 설정 관리
  - 공지사항 관리

---

## 기술 부채 및 개선사항

### 테스트

- 단위 테스트 환경 구축 (Vitest + React Testing Library)
- Server Actions 통합 테스트 작성
- Playwright E2E 테스트 시나리오 작성 (핵심 사용자 플로우)
- CI 파이프라인에서 자동 테스트 실행

### 성능

- 이미지 최적화 (`next/image` 적극 활용)
- 데이터 페칭 캐싱 전략 정비 (ISR, `revalidate` 설정)
- 번들 사이즈 분석 및 코드 스플리팅 최적화
- Supabase 쿼리 최적화 (인덱스, 조인 쿼리)
- Lighthouse 성능 점수 90+ 달성

### 코드 품질

- 스타터킷 잔여 코드 정리 (`/instruments`, tutorial 컴포넌트 등)
- Server Action 에러 처리 패턴 통일
- 공통 유틸리티 함수 정리 및 문서화
- 컴포넌트 Props 타입 정의 일관성 확보

### 인프라 및 배포

- Vercel 프로덕션 배포 설정
- 환경변수 관리 체계화 (개발/스테이징/프로덕션)
- CI/CD 파이프라인 구축 (GitHub Actions)
- 모니터링 및 에러 트래킹 (Sentry 연동)
- 데이터베이스 백업 및 마이그레이션 전략 수립

### 보안

- Rate Limiting 적용 (참여 신청, 로그인 시도)
- CSRF 방어 강화
- 입력값 sanitization 재점검
- Supabase RLS 정책 감사 및 강화

---

## 마일스톤 요약

| 버전 | 목표                        | 예상 기간 |
| ---- | --------------------------- | --------- |
| v1.0 | MVP 완성 (현재)             | 완료      |
| v1.1 | 안정화 + 알림 + 대기열      | 4-6주     |
| v1.2 | 정기 모임 + 템플릿 + 이미지 | 4-6주     |
| v2.0 | 결제 + 소셜 + 통계          | 8-12주    |
| v3.0 | PWA + 다국어 + 관리자       | 8-12주    |
